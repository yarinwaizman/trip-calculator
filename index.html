<!DOCTYPE html>
<html lang="he">
<head>
  <meta charset="UTF-8">
  <title>מחשבון נסיעות</title>
  <style>
    body { font-family: sans-serif; direction: rtl; padding: 20px; }
    label, input, select { display: block; margin-bottom: 10px; }
    h3 { margin-top: 20px; }
    input[type="text"] { direction: rtl; }
    .stop { width: 100%; margin-bottom: 10px; }
  </style>
</head>
<body>
  <h2>חישוב נסיעה</h2>

  <label>סוג נסיעה:</label>
  <select id="tripType" onchange="toggleReturn()">
    <option value="oneway">הלוך</option>
    <option value="roundtrip">הלוך וחזור</option>
  </select>

  <h3>נסיעה הלוך</h3>
  <label>מוצא:</label>
  <input type="text" id="origin" placeholder="תל חי 6 ראשון לציון" autocomplete="off">
  <h3>עצירות בדרך</h3>
  <div id="stops-container">
    <input type="text" class="stop" placeholder="עצירה בדרך" autocomplete="off">
  </div>
  <button type="button" onclick="addStop()">+ הוסף עצירה</button>
  <label>יעד:</label>
  <input type="text" id="destination" placeholder="הראה 264 רמת גן" autocomplete="off">
  <label>שעת יציאה:</label>
  <input type="time" id="departureTime">


  <div id="returnSection" style="display: none;">
    <h3>נסיעה חזור</h3>
    <label>מוצא חזור:</label>
    <input type="text" id="returnOrigin" placeholder="הראה 264 רמת גן" autocomplete="off">
    <label>יעד חזור:</label>
    <input type="text" id="returnDestination" placeholder="תל חי 6 ראשון לציון" autocomplete="off">
    <label>שעת חזור:</label>
    <input type="time" id="returnTime">
  </div>

  <br>
  <button onclick="calculateTrip()">חשב</button>

  <h3>תוצאה:</h3>
  <div id="result"></div>

<script>
  function addStop() {
    const container = document.getElementById("stops-container");
    const input = document.createElement("input");
    input.type = "text";
    input.className = "stop";
    input.placeholder = "עצירה בדרך";
    input.autocomplete = "off";
    container.appendChild(input);

    const autocomplete = new google.maps.places.Autocomplete(input, {
      types: ["geocode"],
      fields: ["place_id", "geometry", "formatted_address", "name"]
    });
    autocomplete.setComponentRestrictions({ country: ["il"] });

    autocomplete.addListener("place_changed", () => {
      const place = autocomplete.getPlace();
      if (!place.geometry) {
        alert(`לא ניתן למצוא מיקום עבור: ${input.value}`);
      }
    });
  }
</script>
<script src="script.js"></script>
<script defer
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAasX9VHsRF10ps6XvhD26eaTLm-torj1I&libraries=places&callback=initAutocomplete">
</script>
</body>
</html>